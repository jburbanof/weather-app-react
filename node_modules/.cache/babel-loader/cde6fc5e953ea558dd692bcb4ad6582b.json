{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport moment from \"moment\";\nimport convertUnits from \"convert-units\";\nimport axios from \"axios\";\n\nconst useCityPage = () => {\n  _s();\n\n  const [chartData, setChartData] = useState(null);\n  const [forecastItemList, setForecastItemList] = useState(null);\n  const {\n    city,\n    countryCode\n  } = useParams();\n  useEffect(() => {\n    const getForecast = async () => {\n      const apiKey = \"6eed5ecf1b61d636500feff49314d96a\";\n      const url = `http://api.openweathermap.org/data/2.5/forecast?q=${city},${countryCode}&appid=${apiKey}`;\n\n      try {\n        const {\n          data\n        } = await axios.get(url);\n        console.log(\"data\", data);\n\n        const toCelsius = temp => convertUnits(temp).from(\"K\").to(\"C\");\n\n        const daysAhead = [0, 1, 2, 3, 4, 5];\n        const days = daysAhead.map(d => moment().add(d, \"d\"));\n        const dataAux = days.map(day => {\n          const tempObjArray = data.list.filter(item => {\n            const dayOfYear = moment.unix(item.dt).dayOfYear();\n            return dayOfYear === day.dayOfYear();\n          });\n          console.log(\"dia\", day.dayOfYear());\n          console.log(tempObjArray);\n          const temps = tempObjArray.map(item => item.main.temp);\n          return {\n            dayHour: day.format(\"dddd\"),\n            min: Number(toCelsius(Math.min(...temps)).toFixed(0)),\n            max: Number(toCelsius(Math.max(...temps)).toFixed(0))\n          };\n        });\n        setChartData(dataAux);\n        const interval = [3, 6, 9, 12, 15, 18];\n        const forecastItemListAux = data.list.filter((item, index) => interval.includes(index)).map(item => {\n          return {\n            hour: moment.unix(item.dt).hour(),\n            weekDay: moment.unix(item.dt).format(\"dddd\"),\n            state: item.weather[0].main.toLowerCase(),\n            temperature: Number(toCelsius(item.main.temp).toFixed(0))\n          };\n        });\n        setForecastItemList(forecastItemListAux);\n      } catch (error) {\n        console.log(\"Error\");\n      }\n    };\n\n    getForecast();\n  }, [city, countryCode]);\n  return {\n    city,\n    chartData,\n    forecastItemList\n  };\n};\n\n_s(useCityPage, \"Oq0LXJ0yq1/kUXy6RQ4H5Y/HF+A=\", false, function () {\n  return [useParams];\n});\n\nexport default useCityPage;","map":{"version":3,"sources":["/home/julian/Desktop/ReactCourse/react-weather-app/src/Hooks/useCityPage.jsx"],"names":["useState","useEffect","useParams","moment","convertUnits","axios","useCityPage","chartData","setChartData","forecastItemList","setForecastItemList","city","countryCode","getForecast","apiKey","url","data","get","console","log","toCelsius","temp","from","to","daysAhead","days","map","d","add","dataAux","day","tempObjArray","list","filter","item","dayOfYear","unix","dt","temps","main","dayHour","format","min","Number","Math","toFixed","max","interval","forecastItemListAux","index","includes","hour","weekDay","state","weather","toLowerCase","temperature","error"],"mappings":"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","sourcesContent":["import  { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport moment from \"moment\";\nimport convertUnits from \"convert-units\";\nimport axios from \"axios\";\n\n\nconst useCityPage = () => {\n    const [chartData, setChartData] = useState(null);\n    const [forecastItemList, setForecastItemList] = useState(null);\n    const { city, countryCode } = useParams();\n    useEffect(() => {\n      const getForecast = async () => {\n        const apiKey = \"6eed5ecf1b61d636500feff49314d96a\";\n        const url = `http://api.openweathermap.org/data/2.5/forecast?q=${city},${countryCode}&appid=${apiKey}`;\n  \n        try {\n          const { data } = await axios.get(url);\n          console.log(\"data\", data);\n          const toCelsius = (temp) => convertUnits(temp).from(\"K\").to(\"C\");\n          const daysAhead = [0, 1, 2, 3, 4, 5];\n          const days = daysAhead.map((d) => moment().add(d, \"d\"));\n          const dataAux = days.map((day) => {\n            const tempObjArray = data.list.filter((item) => {\n              const dayOfYear = moment.unix(item.dt).dayOfYear();\n              return dayOfYear === day.dayOfYear();\n            });\n            console.log(\"dia\", day.dayOfYear());\n            console.log(tempObjArray);\n            const temps = tempObjArray.map((item) => item.main.temp);\n  \n            return {\n              dayHour: day.format(\"dddd\"),\n              min: Number(toCelsius(Math.min(...temps)).toFixed(0)),\n              max: Number(toCelsius(Math.max(...temps)).toFixed(0)),\n              \n            };\n          });\n  \n          setChartData(dataAux);\n  \n          const interval = [3, 6, 9, 12, 15, 18];\n  \n          const forecastItemListAux = data.list\n            .filter((item, index) => interval.includes(index))\n            .map((item) => {\n              return {\n                hour: moment.unix(item.dt).hour(),\n                weekDay: moment.unix(item.dt).format(\"dddd\"),\n                state: item.weather[0].main.toLowerCase(),\n                temperature: Number(toCelsius(item.main.temp).toFixed(0)),\n              };\n            });\n          setForecastItemList(forecastItemListAux);\n        } catch (error) {\n          console.log(\"Error\");\n        }\n      };\n  \n      getForecast();\n    }, [city, countryCode]);\n    return {city, chartData, forecastItemList}\n}\n\nexport default useCityPage"]},"metadata":{},"sourceType":"module"}