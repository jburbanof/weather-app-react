{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport moment from \"moment\";\nimport axios from \"axios\";\nimport { toCelsius } from \"../Utilities/utilities\";\nimport { getForecastUrl } from \"../Utilities/urls\";\n\nconst useCityPage = () => {\n  _s();\n\n  const [chartData, setChartData] = useState(null);\n  const [forecastItemList, setForecastItemList] = useState(null);\n  const {\n    city,\n    countryCode\n  } = useParams();\n  useEffect(() => {\n    const getForecast = async () => {\n      const url = getForecastUrl(city, countryCode);\n\n      try {\n        const {\n          data\n        } = await axios.get(url);\n        console.log(\"data\", data);\n        const daysAhead = [0, 1, 2, 3, 4, 5];\n        const days = daysAhead.map(d => moment().add(d, \"d\"));\n        const dataAux = days.map(day => {\n          const tempObjArray = data.list.filter(item => {\n            const dayOfYear = moment.unix(item.dt).dayOfYear();\n            return dayOfYear === day.dayOfYear();\n          });\n          console.log(\"dia\", day.dayOfYear());\n          console.log(tempObjArray);\n          const temps = tempObjArray.map(item => item.main.temp);\n          return {\n            dayHour: day.format(\"dddd\"),\n            min: toCelsius(Math.min(...temps)),\n            max: toCelsius(Math.max(...temps)),\n            hasTemps: temps.length > 0 ? true : false\n          };\n        }).filter(item => item.hastTemps = true);\n        setChartData(dataAux);\n        const interval = [3, 6, 9, 12, 15, 18];\n        const forecastItemListAux = data.list.filter((item, index) => interval.includes(index)).map(item => {\n          return {\n            hour: moment.unix(item.dt).hour(),\n            weekDay: moment.unix(item.dt).format(\"dddd\"),\n            state: item.weather[0].main.toLowerCase(),\n            temperature: toCelsius(item.main.temp)\n          };\n        });\n        setForecastItemList(forecastItemListAux);\n      } catch (error) {\n        console.log(\"Error\");\n      }\n    };\n\n    getForecast();\n  }, [city, countryCode]);\n  return {\n    city,\n    chartData,\n    forecastItemList\n  };\n};\n\n_s(useCityPage, \"Oq0LXJ0yq1/kUXy6RQ4H5Y/HF+A=\", false, function () {\n  return [useParams];\n});\n\nexport default useCityPage;","map":{"version":3,"sources":["/home/julian/Desktop/ReactCourse/react-weather-app/src/Hooks/useCityPage.jsx"],"names":["useState","useEffect","useParams","moment","axios","toCelsius","getForecastUrl","useCityPage","chartData","setChartData","forecastItemList","setForecastItemList","city","countryCode","getForecast","url","data","get","console","log","daysAhead","days","map","d","add","dataAux","day","tempObjArray","list","filter","item","dayOfYear","unix","dt","temps","main","temp","dayHour","format","min","Math","max","hasTemps","length","hastTemps","interval","forecastItemListAux","index","includes","hour","weekDay","state","weather","toLowerCase","temperature","error"],"mappings":"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","sourcesContent":["import  { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport moment from \"moment\";\nimport axios from \"axios\";\nimport { toCelsius } from \"../Utilities/utilities\";\nimport { getForecastUrl } from \"../Utilities/urls\";\n\n\nconst useCityPage = () => {\n    const [chartData, setChartData] = useState(null);\n    const [forecastItemList, setForecastItemList] = useState(null);\n    const { city, countryCode } = useParams();\n    useEffect(() => {\n      const getForecast = async () => {\n        \n        const url = getForecastUrl(city, countryCode)\n  \n        try {\n          const { data } = await axios.get(url);\n          console.log(\"data\", data);\n          \n          const daysAhead = [0, 1, 2, 3, 4, 5];\n          const days = daysAhead.map((d) => moment().add(d, \"d\"));\n          const dataAux = days.map((day) => {\n            const tempObjArray = data.list.filter((item) => {\n              const dayOfYear = moment.unix(item.dt).dayOfYear();\n              return dayOfYear === day.dayOfYear();\n            });\n            console.log(\"dia\", day.dayOfYear());\n            console.log(tempObjArray);\n            const temps = tempObjArray.map((item) => item.main.temp);\n  \n            return {\n              dayHour: day.format(\"dddd\"),\n              min: toCelsius(Math.min(...temps)),\n              max: toCelsius(Math.max(...temps)),\n              hasTemps: (temps.length > 0 ?  true:false  )\n            };\n          }).filter(item => item.hastTemps = true);\n  \n          setChartData(dataAux);\n  \n          const interval = [3, 6, 9, 12, 15, 18];\n  \n          const forecastItemListAux = data.list\n            .filter((item, index) => interval.includes(index))\n            .map((item) => {\n              return {\n                hour: moment.unix(item.dt).hour(),\n                weekDay: moment.unix(item.dt).format(\"dddd\"),\n                state: item.weather[0].main.toLowerCase(),\n                temperature:toCelsius(item.main.temp),\n              };\n            });\n          setForecastItemList(forecastItemListAux);\n        } catch (error) {\n          console.log(\"Error\");\n        }\n      };\n  \n      getForecast();\n    }, [city, countryCode]);\n    return {city, chartData, forecastItemList}\n}\n\nexport default useCityPage"]},"metadata":{},"sourceType":"module"}